---
- name: Ensure the insights-client package is installed
  yum:
    name: insights-client
    state: present

- name: Enable the Insights client and register
  redhat.insights.insights_config:
    display_name: "{{ inventory_hostname }}"