---
- name: Test Satellite Credential Injection
  hosts: all
  gather_facts: False
  vars:
    satellite_config_path: "{{ lookup('env', 'FOREMAN_INI_PATH') }}"
  tasks:
    - name: List directory for Foreman config
      debug:
        msg: "The Foreman path is: {{ satellite_config_path }}"

    - name: Get contents of the Foreman directory
      shell: "ls -l {{ satellite_config_path }}"
      register: st_dir_out

    - name: List contents of the directory
      debug:
        var: st_dir_out